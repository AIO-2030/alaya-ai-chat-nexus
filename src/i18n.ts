import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

const resources = {
  en: {
    translation: {
      common: {
        appName: 'Univoice',
        ai: 'AI',
        initializingAI: 'Initializing AI...',
        login: 'Login',
        loginConnectWallet: 'Login & Connect Wallet',
        connectPlugWallet: 'Connect with Plug Wallet',
        signInGoogle: 'Sign in with Google',
        logout: 'Logout',
        myWallet: 'My Wallet',
        notConnected: 'Not Connected',
        balance: 'Balance',
        devices: 'Devices',
        battery: 'Battery',
        myDevices: 'My Devices',
        myDevicesSubtitle: 'Manage your connected devices and their status',
        addDevice: 'Add Device',
        manage: 'Manage',
        linkToWifi: 'Link to WiFi',
        selectWifiFor: 'Select WiFi network for',
        connect: 'Connect',
        cancel: 'Cancel',
        contracts: 'Friends',
        contractsSubtitle: '',
        newContract: 'New Friend',
        systemContract: 'AI Assistant',
        typeYourMessage: 'Type your message...',
        emoji: 'Emoji',
        toDevice: 'To Device',
        shareSelf:"Business Card",
        shareQrTitle: 'Share QR to Add Friend',
        shareQrHint: 'Scan to add a friend. If scanning fails, copy the link to share:',
        statusActive: 'Active',
        statusPending: 'Pending',
        statusCompleted: 'Completed',
        deviceConnected: 'Connected',
        deviceDisconnected: 'Disconnected',
        deviceSyncing: 'Syncing',
        plugNotDetected: 'Plug wallet not detected. Please install the Plug browser extension.',
        plugConnectionCancelled: 'Plug connection was cancelled by the user.',
        plugPrincipalFailed: 'Failed to get Plug principal.',
        iiAuthFailed: 'Internet Identity authentication failed.',
        iiPrincipalFailed: 'Failed to get principal from Internet Identity.',
        languageEnglish: 'English',
        languageChinese: '中文',
        langShortEN: 'EN',
        langShortZH: '中文'
      },
      auth: {
        loginRequired: 'Login Required',
        loginWithGoogle: 'Login with Google',
        loginWithWallet: 'Login with Wallet'
      },
      gallery: {
        title: 'Gallery',
        public: 'Public',
        myCreator: 'My Creator',
        create: 'Create',
        createNew: '+ Create',
        noCreations: 'No Creations Yet',
        startCreating: 'Start creating your first pixel art masterpiece!',
        loadingCreations: 'Loading your creations...',
        loginToViewCreations: 'Please login to view your pixel art creations',
        loadingMore: 'Loading more...',
        allLoaded: 'All creations loaded',
        saveSuccess: 'Your pixel art has been saved successfully!',
        saveError: 'Failed to save your creation',
        saving: 'Saving...',
        artTitle: 'Title',
        titlePlaceholder: 'Enter a title for your pixel art...',
        artDescription: 'Description',
        descriptionPlaceholder: 'Describe your creation...'
      },
      pixel: {
        title: 'Pixel Art',
        format: 'Format',
        format32x32: '32x32 Square',
        format32x16: '32x16 Wide',
        preview: 'Pixel Preview',
        processing: 'Processing...',
        colorReduction: 'Color Reduction',
        dithering: 'Dithering',
        smoothing: 'Smoothing',
        apply: 'Apply Pixel Effect',
        reset: 'Reset to Original'
      },
      nft: {
        mintMessage: 'Mint your creation as NFT — Earn rewards & recognition.'
      },
      userManagement: {
        title: 'My Profile',
        subtitle: 'Manage your personal information',
        loading: 'Loading...',
        failedToLoad: 'Failed to load user information',
        pleaseLogin: 'Please login first',
        nickname: 'Nickname',
        nicknameNotSet: 'Nickname not set',
        email: 'Email',
        emailNotSet: 'Email not set',
        walletAddress: 'Wallet Address',
        accountInfo: 'Account Information',
        userId: 'User ID',
        principalId: 'Principal ID',
        loginMethod: 'Login Method',
        status: 'Status',
        authenticated: 'Authenticated',
        unauthenticated: 'Unauthenticated',
        wallet: 'Wallet',
        google: 'Google',
        ii: 'II',
        dangerZone: 'Danger Zone',
        deleteProfile: 'Delete Profile',
        deleteProfileConfirm: 'Are you sure you want to delete your profile? This action cannot be undone.',
        deleteProfileWarning: 'This action cannot be undone, please proceed with caution',
        deleteProfileSuccess: 'Profile deleted successfully',
        deleteProfileFailed: 'Failed to delete profile, please try again',
        deleteProfileInProgress: 'Deleting...',
        updateNickname: 'Update Nickname',
        updateNicknameSuccess: 'Nickname updated successfully',
        updateNicknameFailed: 'Failed to update nickname, please try again',
        updateNicknameInProgress: 'Updating...',
        inputNickname: 'Enter nickname',
        save: 'Save',
        cancel: 'Cancel',
        refresh: 'Refresh',
        edit: 'Edit'
      }
    },
  },
  zh: {
    translation: {
      common: {
        appName: 'Univoice',
        ai: 'AI',
        initializingAI: '初始化 AI...',
        login: '登录',
        loginConnectWallet: '登录并连接钱包',
        connectPlugWallet: '使用 Plug 钱包连接',
        signInGoogle: '使用 Google 登录',
        logout: '退出登录',
        myWallet: '我的钱包',
        notConnected: '未连接',
        balance: '余额',
        devices: '设备',
        battery: '电量',
        myDevices: '我的设备',
        myDevicesSubtitle: '管理已连接设备及其状态',
        addDevice: '添加设备',
        manage: '管理',
        linkToWifi: '连接 WiFi',
        selectWifiFor: '为设备选择 WiFi 网络',
        connect: '连接',
        cancel: '取消',
        contracts: '好友',
        contractsSubtitle: '',
        newContract: '新建联系人',
        systemContract: 'AI 助手',
        typeYourMessage: '输入消息...',
        emoji: '表情',
        toDevice: '发送到设备',
        shareSelf:"名片",
        shareQrTitle: '分享二维码添加好友',
        shareQrHint: '扫码添加好友；若无法识别，请复制链接分享：',
        statusActive: '已激活',
        statusPending: '待处理',
        statusCompleted: '已完成',
        deviceConnected: '已连接',
        deviceDisconnected: '未连接',
        deviceSyncing: '同步中',
        plugNotDetected: '未检测到 Plug 钱包，请先安装 Plug 浏览器扩展',
        plugConnectionCancelled: '用户取消了 Plug 连接',
        plugPrincipalFailed: '无法获取 Plug Principal',
        iiAuthFailed: 'Internet Identity 认证失败',
        iiPrincipalFailed: '无法从 Internet Identity 获取 Principal',
        languageEnglish: 'English',
        languageChinese: '中文',
        langShortEN: 'EN',
        langShortZH: '中文'
      },
      auth: {
        loginRequired: '需要登录',
        loginWithGoogle: '使用 Google 登录',
        loginWithWallet: '使用钱包登录'
      },
      gallery: {
        title: '图库',
        public: '公开',
        myCreator: '我的创作',
        create: '创建',
        createNew: '+ 创建',
        noCreations: '暂无创作',
        startCreating: '开始创建您的第一个像素艺术杰作吧！',
        loadingCreations: '正在加载您的作品...',
        loginToViewCreations: '请登录查看您的像素艺术作品',
        loadingMore: '加载更多...',
        allLoaded: '所有作品已加载完成',
        saveSuccess: '您的像素艺术已成功保存！',
        saveError: '保存作品失败',
        saving: '保存中...',
        artTitle: '标题',
        titlePlaceholder: '为您的像素艺术输入标题...',
        artDescription: '描述',
        descriptionPlaceholder: '描述您的创作...'
      },
      pixel: {
        title: '像素艺术',
        format: '格式',
        format32x32: '32x32 方形',
        format32x16: '32x16 宽屏',
        preview: '像素预览',
        processing: '处理中...',
        colorReduction: '颜色简化',
        dithering: '抖动处理',
        smoothing: '平滑处理',
        apply: '应用像素效果',
        reset: '重置为原始'
      },
      nft: {
        mintMessage: '将您的创作铸造为NFT — 获得奖励与认可。'
      },
      userManagement: {
        title: '我的档案',
        subtitle: '管理您的个人信息',
        loading: '加载中...',
        failedToLoad: '无法加载用户信息',
        pleaseLogin: '请先登录',
        nickname: '昵称',
        nicknameNotSet: '未设置昵称',
        email: '邮箱',
        emailNotSet: '未设置邮箱',
        walletAddress: '钱包地址',
        accountInfo: '账户信息',
        userId: '用户ID',
        principalId: 'Principal ID',
        loginMethod: '登录方式',
        status: '状态',
        authenticated: '已认证',
        unauthenticated: '未认证',
        wallet: '钱包',
        google: 'Google',
        ii: 'II',
        dangerZone: '危险操作',
        deleteProfile: '删除用户档案',
        deleteProfileConfirm: '确定要删除您的用户档案吗？此操作不可撤销。',
        deleteProfileWarning: '删除后无法恢复，请谨慎操作',
        deleteProfileSuccess: '档案删除成功',
        deleteProfileFailed: '档案删除失败，请重试',
        deleteProfileInProgress: '删除中...',
        updateNickname: '更新昵称',
        updateNicknameSuccess: '昵称更新成功',
        updateNicknameFailed: '昵称更新失败，请重试',
        updateNicknameInProgress: '更新中...',
        inputNickname: '输入昵称',
        save: '保存',
        cancel: '取消',
        refresh: '刷新',
        edit: '编辑'
      }
    },
  },
} as const;

const getInitialLanguage = (): string => {
  if (typeof window === 'undefined') return 'en';
  const saved = localStorage.getItem('lang');
  if (saved === 'en' || saved === 'zh') return saved;
  return navigator.language.toLowerCase().startsWith('zh') ? 'zh' : 'en';
};

i18n
  .use(initReactI18next)
  .init({
    resources,
    lng: getInitialLanguage(),
    fallbackLng: 'en',
    interpolation: { escapeValue: false },
  });

export default i18n;
